{"version":3,"sources":["ErddapClient.js","components/MultiSelectSort.js","components/FieldFilter.js","components/FieldFilters.js","components/ResultsTable.js","components/TabledapFormats.js","components/DataAccessForm.js","components/Erddap.js","components/Erddaps.js","App.js","serviceWorker.js","index.js"],"names":["jsonp","require","ErddapClient","url","this","base_url","replace","_datasets","fetchJsonp","callbackName","options","param","name","Promise","resolve","reject","err","data","prototype","fetchAwesomeErddaps","search","query","page","itemsPerPage","timeout","urlParams","URLSearchParams","set","toString","then","e2o","listDatasets","datasets","length","map","ds","sort","keys","table","columnNames","results","rows","forEach","row","result","i","push","time_encoder","value","istabledap","Date","toISOString2","m","e","ErddapDataset","erddap","dsid","dataset_id","subsets","_fetchMetadata","Error","bind","summary","_summary","response","obj","type","info","param_encoder","dataset","_fieldnames","_type","subsetVariables","attribute","NC_GLOBAL","split","x","trim","wanted","dimvar","key","dimensions","etype","evalue","v","isNaN","id","time_dimension","lat_dimension","lon_dimension","dimension","encode","variable","constraint","encoded_value","_meta","variables","fetchMetadata","prepareSubset","undefined","fetchData","o","getDataUrl","formatExtension","dap","SortableMultiValue","SortableElement","props","innerProps","onMouseDown","preventDefault","stopPropagation","MultiValue","SortableSelect","SortableContainer","Select","MultiSelectSort","selected","onChange","placeholder","axis","onSortEnd","array","from","to","oldIndex","newIndex","selectedVariables","slice","splice","distance","getHelperDimensions","node","getBoundingClientRect","isMulti","components","closeMenuOnSelect","noOptionsMessage","React","Component","withStyles","theme","root","width","height","padding","display","switchBase","color","palette","grey","transform","common","white","opacity","backgroundColor","primary","main","borderColor","thumb","boxShadow","track","border","borderRadius","checked","Switch","ItemTextField","operation","onValueAssigned","metadata","label","filterkv","Autocomplete","style","renderInput","params","TextField","variant","onInputChange","ItemTimeField","useState","absoluteOrRelative","setAbsoluteOrRelative","now","setNow","timeUnits","setTimeUnits","timeQuantity","setTimeQuantity","setBadDateFormat","selectedDate","setSelectedDate","onAbsoluteTimeChanged","date","isodate","toISOString","substring","labelId","target","MenuItem","FormControl","component","margin","FormLabel","FormGroup","InputProps","inputProps","min","parseInt","ampm","onError","console","log","format","ItemFilter","datatype","filters","FieldFilterSelect","FieldFilter","setVariable","filterop","setFilterop","onVariableSelected","FieldFilters","Math","random","setFilters","onFiltersChanged","addFilter","filter","deleteFilter","filters2","uri_component","f","Fragment","idx","icon","deleteThisFilter","onThisValueAssigned","IconButton","onClick","Box","ResultsTable","Typography","gutterBottom","TableContainer","Paper","Table","size","aria-label","TableHead","TableRow","TableCell","TableBody","k","QueryConstructorForm","state","setSelected","setState","indexOf","prevProps","field","option","QueryLink","setFormat","TabledapFormats","parts","join","displayparts","encodeURIComponent","uri_display","href","DataAccessForm","queryno","newqueryno","onDataFetched","catch","noDataFetched","debounce","Erddap","server","onDatasetChanged","event","erddapClient","Erddaps","awesomeErddaps","setAwesomErddaps","erddapUrl","setErddapUrl","fetchedAwesomErddaps","setFetchedAwesomeErddaps","useEffect","a","public","short_name","App","utils","DateFnsUtils","className","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e36904ae.chunk.js","sourcesContent":["const jsonp = require('jsonp');\r\nvar ErddapClient = function(url){\r\n\turl = url || \"https://coastwatch.pfeg.noaa.gov/erddap/\";\r\n\tthis.base_url = url.replace(/\\/+$/, \"\");\r\n\tthis._datasets = {};\r\n}\r\nconst fetchJsonp = function(url,callbackName){\r\n\tconst options = {param: \".jsonp\"};\r\n\tif(callbackName){\r\n\t\toptions.name = callbackName;\r\n\t}\r\n\treturn new Promise((resolve,reject) => {\r\n\t\tjsonp(url, options,\r\n\t\t\t(err,data)=>{\r\n\t\t\t\tif(err){\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tresolve(data);\r\n\t\t\t\t}\r\n\t\t\t});\r\n  \t});\r\n}\r\nErddapClient.prototype.fetchAwesomeErddaps = function(){\r\n\treturn fetchJsonp(\"https://irishmarineinstitute.github.io/awesome-erddap/erddaps.jsonp\",\"awesomeErddapsCb\");\r\n}\r\nErddapClient.prototype.search = function(query,page,itemsPerPage,timeout){\r\n\tpage = page || 1;\r\n\titemsPerPage = itemsPerPage  || 10000;\r\n\ttimeout = 5000;\r\n\tvar url = this.base_url + \"/search/index.json?\";\r\n\tvar urlParams = new URLSearchParams(\"?\");\r\n\turlParams.set(\"searchFor\",query);\r\n\turlParams.set(\"page\",page);\r\n\turlParams.set(\"itemsPerPage\",itemsPerPage);\r\n\treturn fetchJsonp(url + urlParams.toString()).then(e2o);\r\n}\r\n\r\nErddapClient.prototype.listDatasets = function(){\r\n\treturn this.search(\"tabledap\").then(function(datasets){\r\n\t\tif(datasets && datasets.length){\r\n\t\t\treturn datasets.map((ds)=>ds[\"Dataset ID\"]).sort();\r\n\t\t}\r\n\t\treturn [];\r\n\t\t});\r\n}\r\n\r\nvar e2o = function(data){\r\n\tvar keys = data.table.columnNames;\r\n\tvar results = [];\r\n\tdata.table.rows.forEach(function(row){\r\n\t\tvar result = [];\r\n\t\tfor(var i=0;i<keys.length;i++){\r\n\t\t\tresult[keys[i]] = row[i];\r\n\t\t}\r\n\t\tresults.push(result);\r\n\t});\r\n\treturn results;\r\n};\r\n/*\r\nvar nc_global2o = function(results){\r\n\tvar info = {};\r\n\tresults.forEach(function(x){\r\n\t\tif(x[\"Variable Name\"] === \"NC_GLOBAL\"){\r\n\t\t\tinfo[x[\"Attribute Name\"]] = x.Value;\r\n\t\t}\r\n\t})\r\n\treturn info;\r\n}\r\n*/\r\nvar time_encoder = function(value,istabledap) {\r\n  if(value instanceof Date){\r\n    return istabledap ? value.toISOString2() : (\"(\"+value.toISOString2()+\")\");\r\n  }\r\n  try {\r\n    var m = new Date(value).toISOString2();\r\n     return istabledap? m : (\"(\"+m+\")\");\r\n  } catch (e) {\r\n    return value;\r\n  }\r\n}\r\nvar ErddapDataset = function(erddap,dsid){\r\n\tthis.erddap = erddap;\r\n\tthis.dataset_id = dsid;\r\n\tthis.subsets = {};\r\n\tthis._fetchMetadata =   this.erddap.search(\"datasetID=\" + this.dataset_id).then(function(data){\r\n\t      for(var i=0;i<data.length;i++){\r\n\t        if(data[i][\"Dataset ID\"] === this.dataset_id){\r\n\t          return data[i];\r\n\t        }\r\n\t      }\r\n\t      throw new Error(\"Unknown dataset: [\"+dsid+\"]\");\r\n\t    }.bind(this)).then(function(summary){\r\n\t      this._summary = summary;\r\n\t      var url = this.erddap.base_url + \"/info/\" + this.dataset_id + \"/index.json\";\r\n\t      return fetchJsonp(url).then(function(response) { // TODO: handle error\r\n\t    var obj = {};\r\n\t    for (var i = 0; i < response.table.rows.length; i++) {\r\n\t      var row = response.table.rows[i];\r\n\t      obj[row[0]] = obj[row[0]] || {};\r\n\t      obj[row[0]][row[1]] = obj[row[0]][row[1]] || {};\r\n\t      obj[row[0]][row[1]][row[2]] = obj[row[0]][row[1]][row[2]] || {};\r\n\t      obj[row[0]][row[1]][row[2]].type = row[3];\r\n\t      obj[row[0]][row[1]][row[2]].value = row[4];\r\n\t    };\r\n\t    return (obj);\r\n\t  }).then(function(info) {\r\n\t    var param_encoder = {};\r\n\t    var dataset = {\r\n\t      _fieldnames: [],\r\n\t      _type: {}\r\n\t    };\r\n\t    var subsetVariables = [];\r\n\t    try{\r\n\t    \tsubsetVariables = info.attribute.NC_GLOBAL.subsetVariables.value.split(\",\").map(x=>x.trim());\r\n\r\n\t    }catch(e){}\r\n\t    var wanted = [\"dimension\", \"variable\"];\r\n\t    for (var x = 0; x < wanted.length; x++) {\r\n\t      var dimvar = wanted[x];\r\n\t      if (!info[dimvar]) {\r\n\t        continue;\r\n\t      }\r\n\r\n\t      if (dimvar === \"dimension\") {\r\n\t        dataset.dimensions = {};\r\n\t      }\r\n\t      dataset._type[key] = \"String\";\r\n\r\n\t      for (var key in info[dimvar]) {\r\n\t        dataset._fieldnames.push(key);\r\n\t        var etype = info[dimvar][key][\"\"][\"type\"];\r\n\t        var evalue = \"\" + info[dimvar][key][\"\"][\"value\"];\r\n\t        switch (etype) {\r\n\t          case 'float':\r\n\t          case 'double':\r\n\t            param_encoder[key] = function(v) {\r\n\t              return isNaN(v) ? null : v\r\n\t            };\r\n\t            dataset._type[key] = \"Number\"\r\n\t            break;\r\n\t          case 'int':\r\n\t          case 'long':\r\n\t          case 'short':\r\n\t          case 'byte':\r\n\t            param_encoder[key] = function(v) {\r\n\t              return isNaN(v) ? null : v\r\n\t            };\r\n\t            dataset._type[key] = \"Integer\"\r\n\t            break;\r\n\t          case 'String':\r\n\t            param_encoder[key] = function(v) {\r\n\t              return '\"' + v + '\"'\r\n\t            };\r\n\t            break;\r\n\t          default:\r\n\t            throw new Error('Unknown type [' + etype + '] for ' + dataset.id + '.' + key);\r\n\t        }\r\n\r\n\t        //var isTimeField = false;\r\n\t        if (info.attribute[key] && info.attribute[key][\"_CoordinateAxisType\"]) {\r\n\t          var axisType = info.attribute[key][\"_CoordinateAxisType\"].value;\r\n\t          switch (axisType) {\r\n\t            case \"Time\":\r\n\t              dataset.time_dimension = key;\r\n\t              param_encoder[key] = time_encoder;\r\n\t              param_encoder['since'] = time_encoder;\r\n\t              param_encoder['until'] = time_encoder;\r\n\t              dataset._type[key] = \"Time\";\r\n\t              break;\r\n\t            case \"Lat\":\r\n\t              dataset.lat_dimension = key;\r\n\t              break;\r\n\t            case \"Lon\":\r\n\t              dataset.lon_dimension = key;\r\n\t              break;\r\n\t            default:\r\n\t              break;\r\n\t          }\r\n\t        }\r\n\r\n\t        if (dimvar !== \"dimension\" && info.dimension && evalue) {\r\n\t          dataset.dimensions[key] = evalue.split(/[ ,]+/);\r\n\t        }\r\n\t        if (info.attribute[key]) {\r\n\t          if (info.attribute[key][\"ioos_category\"] && info.attribute[key][\"ioos_category\"].value == \"Time\") {\r\n\t            dataset.time_dimension = key;\r\n\t            param_encoder[key] = time_encoder;\r\n\t            dataset._type[key] = \"Time\";\r\n\t          }\r\n\t        }\r\n\t      }\r\n\r\n\t    }\r\n\t    dataset.param_encoder = param_encoder;\r\n\t    dataset.base_url = this.erddap.base_url;\r\n\t    dataset.id = this.dataset_id;\r\n\t    dataset.info = info;\r\n\t    dataset.subsetVariables = subsetVariables;\r\n\t    dataset.encode = function(variable,constraint,value){\r\n\t    \tconst encoded_value = this.param_encoder[variable](value);\r\n\t    \treturn `${variable}${constraint}${encoded_value}`;\r\n\r\n\t    }.bind(dataset);\r\n\t    dataset.subsets = this.subsets;\r\n\t    this._meta = dataset;\r\n\t    return dataset;\r\n\t  }.bind(this));\r\n\t}.bind(this));\r\n\r\n}\r\nErddapDataset.prototype.variables = function(){\r\n\treturn this._meta.info.variable;\r\n}\r\n\r\nErddapDataset.prototype.fetchMetadata = function(){\r\n\treturn this._fetchMetadata;\r\n}\r\nErddapDataset.prototype.prepareSubset = function(variable){\r\n\tif(this.subsets[variable] === undefined){\r\n\t\tthis.subsets[variable] = null;\r\n\t\tthis.fetchData(variable+\"&distinct()\").then(results=>{\r\n\t\t\tthis.subsets[variable] = results.map(o=>o[variable]);\r\n\t\t})\r\n\t}\r\n\r\n}\r\n\r\nErddapDataset.prototype.getDataUrl = function(formatExtension){\r\n\treturn this.erddap.base_url + \"/tabledap/\" + this.dataset_id+formatExtension+\"?\"\r\n}\r\nErddapDataset.prototype.fetchData = function(dap){\r\n\tvar url = this.getDataUrl(\".json\")+dap;\r\n\treturn fetchJsonp(url)\r\n\t\t.then(e2o);\r\n }\r\n\r\nErddapClient.prototype.dataset = function(dsid){\r\n\tthis._datasets[dsid] = this._datasets[dsid] || new ErddapDataset(this,dsid);\r\n\treturn this._datasets[dsid];\r\n}\r\nexport default ErddapClient","//See https://react-select.com/advanced#sortable-multiselect\r\nimport React from 'react';\r\n\r\nimport Select, { components } from 'react-select';\r\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\r\n\r\nfunction arrayMove(array, from, to) {\r\n  array = array.slice();\r\n  array.splice(to < 0 ? array.length + to : to, 0, array.splice(from, 1)[0]);\r\n  return array;\r\n}\r\n\r\nconst SortableMultiValue = SortableElement(props => {\r\n  // this prevents the menu from being opened/closed when the user clicks\r\n  // on a value to begin dragging it. ideally, detecting a click (instead of\r\n  // a drag) would still focus the control and toggle the menu, but that\r\n  // requires some magic with refs that are out of scope for this example\r\n  const onMouseDown = e => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n  const innerProps = { onMouseDown };\r\n  return <components.MultiValue {...props} innerProps={innerProps} />;\r\n});\r\n\r\nconst SortableSelect = SortableContainer(Select);\r\n\r\n\r\nclass MultiSelectSort extends React.Component {\r\n\t  /*\r\n\t constructor(props) {\r\n   \t \tsuper(props);\r\n\t    this.state = {\r\n\t      selected: []\r\n\t    };\r\n\t  }\r\n\t  componentDidMount(){\r\n\t  \tthis.setState({selected: this.props.options.filter(o=>o.selected)});\r\n\t  }\r\n\t  componentDidUpdate(oldProps){\r\n\t  \tif(oldProps.dataset !== this.props.dataset){\r\n\t  \t\tthis.setState({selected: this.props.options.filter(o=>o.selected)});\r\n\t  \t}\r\n\t  }\r\n\t  */\r\n\trender(){\r\n\t\tconst {options,selected,onChange,placeholder} = this.props;\r\n\r\n\t\t  const onSortEnd = ({ oldIndex, newIndex }) => {\r\n\r\n\t\t    const selectedVariables = arrayMove(selected, oldIndex, newIndex);\r\n\t\t    onChange(selectedVariables);\r\n\t\t  };\r\n\r\n\t\t  return (\r\n\t\t    <SortableSelect\r\n\t\t      // react-sortable-hoc props:\r\n\t\t      axis=\"xy\"\r\n\t\t      onSortEnd={onSortEnd}\r\n\t\t      distance={4}\r\n\t\t      // small fix for https://github.com/clauderic/react-sortable-hoc/pull/352:\r\n\t\t      getHelperDimensions={({ node }) => node.getBoundingClientRect()}\r\n\t\t      // react-select props:\r\n\t\t      isMulti\r\n\t\t      options={options}\r\n\t\t      value={selected}\r\n\t\t      onChange={onChange}\r\n\t\t      components={{\r\n\t\t        MultiValue: SortableMultiValue,\r\n\t\t      }}\r\n\t\t      closeMenuOnSelect={false}\r\n\t\t      noOptionsMessage={()=><i>No more variables...</i>}\r\n\t\t      placeholder={placeholder || \"Select...\"}\r\n\t\t    />\r\n\t\t  );\r\n\t}\r\n\r\n}\r\n\r\nexport default MultiSelectSort;","import React from 'react';\r\nimport { Select, MenuItem, TextField} from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport { KeyboardDateTimePicker } from '@material-ui/pickers'\r\nimport { FormGroup, FormControl, FormControlLabel, FormLabel  } from '@material-ui/core';\r\nimport { Autocomplete } from '@material-ui/lab';\r\n\r\n\r\nconst AntSwitch = withStyles(theme => ({\r\n  root: {\r\n    width: 28,\r\n    height: 16,\r\n    padding: 0,\r\n    display: 'flex',\r\n  },\r\n  switchBase: {\r\n    padding: 2,\r\n    color: theme.palette.grey[500],\r\n    '&$checked': {\r\n      transform: 'translateX(12px)',\r\n      color: theme.palette.common.white,\r\n      '& + $track': {\r\n        opacity: 1,\r\n        backgroundColor: theme.palette.primary.main,\r\n        borderColor: theme.palette.primary.main,\r\n      },\r\n    },\r\n  },\r\n  thumb: {\r\n    width: 12,\r\n    height: 12,\r\n    boxShadow: 'none',\r\n  },\r\n  track: {\r\n    border: `1px solid ${theme.palette.grey[500]}`,\r\n    borderRadius: 16 / 2,\r\n    opacity: 1,\r\n    backgroundColor: theme.palette.common.white,\r\n  },\r\n  checked: {},\r\n}))(Switch);\r\n\r\nfunction ItemTextField(props) {\r\n\t\tconst {variable,operation,onValueAssigned,metadata} = props;\r\n\t\tconst label = variable+\" \"+filterkv[operation];\r\n\t\tconst onChange = (e,value) =>{\r\n            onValueAssigned(variable,operation,value);\r\n        };\r\n        let options = metadata.subsets[variable];\r\n        if(options){\r\n            return(<Autocomplete\r\n              options={options}\r\n              style={{ width: 300 }}\r\n              renderInput = {params => (<TextField {...params} label={label} variant=\"outlined\" />)}\r\n              label={label}\r\n              onInputChange={onChange}\r\n         />);\r\n         \r\n        }\r\n\t\treturn (<TextField label={label} variant=\"outlined\" onChange={onChange}/>);\r\n}\r\n\r\nfunction ItemTimeField(props){\r\n\t\tconst [absoluteOrRelative, setAbsoluteOrRelative] = React.useState(\"0\");\r\n\t\tconst [now, setNow] = React.useState(\"now-\");\r\n\t\tconst [timeUnits, setTimeUnits] = React.useState(\"hours\");\r\n\t\tconst [timeQuantity, setTimeQuantity] = React.useState(1);\r\n\t\tconst [badDateFormat, setBadDateFormat] = React.useState(false);\r\n\t\tconst [selectedDate, setSelectedDate] = React.useState(false);\r\n\t\tconst {variable,operation,onValueAssigned} = props;\r\n\t\tconst label = variable+\" \"+filterkv[operation];\r\n\t\tconst onAbsoluteOrRelativeChanged = (e)=>setAbsoluteOrRelative(e.target.value);\r\n\t\tconst onRelativeTimeQuantityChanged = (e) =>{\r\n\t\t\tvar value = parseInt(e.target.value);\r\n\t\t\tsetTimeQuantity(value);\r\n\t\t\tonValueAssigned(variable,operation,now+value+timeUnits);\r\n\t\t};\r\n\t\tconst onRelativeTimeUnitsChanged = (e)=>{\r\n\t\t\tvar value = e.target.value;\r\n\t\t\tsetTimeUnits(value);\r\n\t\t\tonValueAssigned(variable,operation,now+timeQuantity+value);\r\n\t\t}\r\n\t\tconst onRelativeTimeNowChanged = (e)=>{\r\n\t\t\tvar value = e.target.value;\r\n\t\t\tsetNow(value);\r\n\t\t\tonValueAssigned(variable,operation,value+timeQuantity+timeUnits);\r\n\t\t}\r\n\t\tconst onAbsoluteTimeChanged = (date) =>{\r\n\t\t\tvar isodate;\r\n\t\t\ttry{\r\n\t\t\t\tisodate = date.toISOString().substring(0,18)+\"Z\";\r\n\t\t\t}catch(e){\r\n\t\t\t\tsetBadDateFormat(true);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetSelectedDate(date);\r\n\t\t\tsetBadDateFormat(false);\r\n\t\t\tonValueAssigned(variable,operation,isodate)\r\n\t\t};\r\n\t\tif(absoluteOrRelative === \"0\"){\r\n\t\t\treturn(\r\n\t\t\t<Select labelId={label} value={absoluteOrRelative} onChange={onAbsoluteOrRelativeChanged}>\r\n\t\t\t\t<MenuItem key=\"0\" value=\"0\">Choose how to specify {variable}... </MenuItem>\r\n\t\t\t\t<MenuItem key=\"absolute\" value=\"absolute\">A specific date/time...</MenuItem>)\r\n\t\t\t\t<MenuItem key=\"relative\" value=\"relative\">A time relative to when the query is run...</MenuItem>)\r\n\t\t\t</Select>\r\n\t\t );\r\n\t\t}\r\n\t\tif(absoluteOrRelative === \"relative\"){\r\n\t\t\treturn (\r\n\t\t\t<FormControl component=\"fieldset\" margin=\"dense\">\r\n        <FormLabel component=\"legend\">{label}</FormLabel>\r\n\t\t\t<FormGroup row={true}>\r\n\t\t\t<Select value={now} onChange={onRelativeTimeNowChanged}>\r\n\t\t\t\t<MenuItem key=\"nowPlus\" value=\"now+\">NOW plus</MenuItem>)\r\n\t\t\t\t<MenuItem key=\"nowMinus\" value=\"now-\">NOW minus</MenuItem>\r\n\t\t\t</Select>\r\n\t\t\t   <TextField type=\"number\" InputProps={{inputProps:{min: 1}}} value={timeQuantity} onChange={onRelativeTimeQuantityChanged}/>\r\n\t\t\t<Select value={timeUnits} onChange={onRelativeTimeUnitsChanged}>\r\n\t\t\t\t<MenuItem key=\"seconds\" value=\"seconds\">{timeQuantity === 1 ? \"second\":\"seconds\"}</MenuItem>\r\n\t\t\t\t<MenuItem key=\"minutes\" value=\"minutes\">{timeQuantity === 1 ? \"minute\":\"minutes\"}</MenuItem>\r\n\t\t\t\t<MenuItem key=\"hours\" value=\"hours\">{timeQuantity === 1 ? \"hour\": \"hours\"}</MenuItem>\r\n\t\t\t\t<MenuItem key=\"days\" value=\"days\">{timeQuantity === 1 ? \"day\": \"days\"}</MenuItem>\r\n\t\t\t\t<MenuItem key=\"months\" value=\"months\">{timeQuantity === 1 ? \"month\": \"months\"}</MenuItem>\r\n\t\t\t\t<MenuItem key=\"years\" value=\"years\">{timeQuantity === 1 ? \"year\": \"years\"}</MenuItem>\r\n\t\t\t\t\r\n\t\t\t</Select>\r\n\t\t\t   </FormGroup>\r\n\t\t\t   </FormControl>);\r\n\t\t}\r\n\t\tif(selectedDate === false){\r\n\t\t\tonAbsoluteTimeChanged(new Date(new Date().toISOString().substring(0,10)+\"Z\"))\r\n\t\t}\r\n\r\n\t\t return (      <KeyboardDateTimePicker\r\n        variant=\"inline\"\r\n        ampm={false}\r\n        label={label}\r\n        value={selectedDate}\r\n        onChange={onAbsoluteTimeChanged}\r\n        onError={console.log}\r\n        format=\"yyyy-MM-dd HH:mm:ss\"\r\n      />);\r\n\t\t\t\t\r\n}\r\nconst filterkv = {\r\n\t\"=\": \"equals\",\r\n\t\"!=\": \"does not equal\",\r\n\t\"<\": \"is less than\",\r\n\t\">\": \"is greater than\",\r\n\t\">=\": \"is not less than\",\r\n\t\"<=\": \"is not greater than\",\r\n\t\"=~\": \"matches the regular expression\"\r\n}\r\n\r\nfunction ItemFilter(props){\r\n\tconst {variable,value,datatype,onChange} = props;\r\n\tconst filters = [\"=\",\"!=\",\"<\",\">\",\"<=\",\">=\"];\r\n\tif(datatype === \"String\"){\r\n\t\tfilters.push(\"=~\");\r\n\t}\r\n\r\n\treturn(\r\n\t\t\t<Select labelId={variable} value={value} onChange={onChange}>\r\n\t\t\t<MenuItem key=\"0\" value=\"0\">Filter by {variable} ... </MenuItem>\r\n\t\t\t{filters.map((key)=>{\r\n\t\t\t\treturn(<MenuItem key={key} value={key}>{variable} {filterkv[key]}</MenuItem>)\r\n\t\t\t})}\r\n\t\t\t</Select>\r\n\t\t);\r\n}\r\n\r\nfunction FieldFilterSelect(props){\r\n\tconst {variables,onChange} = props;\r\n\treturn (<Select value=\"__choose__\" onChange={onChange}>\r\n\t\t<MenuItem key=\"__choose__\" value=\"__choose__\">Add a filter...</MenuItem>\r\n\t\t\t{variables.map((variable)=> {\r\n\t\t\t\treturn(<MenuItem key={variable} value={variable}>{variable}</MenuItem>)\r\n\t\t\t})}\r\n\t</Select>);\r\n}\r\n/*\r\nclass FieldFilter extends React.Component{\r\n\trender(){\r\n\t\tconst {variables} = this.props;\r\n\t\treturn (<FieldFilterSelect variables={variables} onChange={onChange}/>)\r\n\t}\r\n}\r\n\r\nexport default FieldFilter;\r\n*/\r\nexport default function FieldFilter(props){\r\n\tconst [variable, setVariable] = React.useState(null)\r\n\tconst [filterop, setFilterop] = React.useState(null)\r\n\t\tconst {variables,onVariableSelected, onValueAssigned, metadata} = props;\r\n\t\tconst onVariableChange = (e)=>{\r\n\t\t\tif(e.target.value !== \"__choose__\"){\r\n\t\t\t\tsetVariable(e.target.value);\r\n\t\t\t\tonVariableSelected(e.target.value);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst onFilterOpChange = (e)=>{setFilterop(e.target.value)};\r\n\t\tconst datatype = metadata._type[variable];\r\n\t\tif(filterop){\r\n\t\t\tif(datatype === \"Time\"){\r\n\t\t\t\treturn(<ItemTimeField variable={variable} metadata={metadata} operation={filterop} onValueAssigned={onValueAssigned}/>)\r\n\t\t\t}\r\n\t\t\treturn(<ItemTextField variable={variable} metadata={metadata} operation={filterop} onValueAssigned={onValueAssigned}/>)\r\n\t\t}\r\n\t\tif(variable){\r\n\t\t\treturn(<ItemFilter datatype={datatype} variable={variable} value=\"0\" onChange={onFilterOpChange}/>)\r\n\t\t}\r\n\t\treturn (<FieldFilterSelect variables={variables} onChange={onVariableChange}/>)\r\n}\r\n","import React, {useState} from 'react';\r\nimport FieldFilter from './FieldFilter';\r\nimport {Box} from '@material-ui/core';\r\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\r\nimport { IconButton } from '@material-ui/core';\r\n\r\nexport default function FieldFilters(props){\r\n\tconst [filtering, setFiltering] = useState(null);\r\n\tconst [filters, setFilters] = useState([{key: Math.random()}])\r\n\tconst {variables, metadata, onFiltersChanged} = props;\r\n\tconst addFilter = (filter)=>{setFilters([...filters,{key: Math.random()}]);}\r\n\tconst deleteFilter = (filter)=>{\r\n\t\tlet filters2 = filters.filter((v)=>v.key!==filter.key)\r\n\t\tsetFilters(filters2);\r\n\t\tonFiltersChanged && onFiltersChanged(filters2.filter(filter=>filter.uri_component));\r\n\t};\r\n\tconst onValueAssigned = (filter,variable,constraint,value)=>{\r\n\t\tif(value === undefined) return;\r\n\t\tconst filters2 = [...filters];\r\n\t\tfilters2.forEach((f)=>{\r\n\t\t\tif(f.key === filter.key){\r\n\t\t\t\tif(value.length){\r\n\t\t\t\t\tf.variable = variable;\r\n\t\t\t\t\tf.constraint = constraint;\r\n\t\t\t\t\tf.value = value;\r\n\t\t\t\t\tf.uri_component = metadata.encode(variable,constraint,value);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdelete f.variable;\r\n\t\t\t\t\tdelete f.constraint;\r\n\t\t\t\t\tdelete f.value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tsetFilters(filters2);\r\n\t\tonFiltersChanged && onFiltersChanged(filters2.filter(filter=>filter.uri_component));\r\n\t};\r\n\treturn (<React.Fragment>\r\n\t\t\t\t{filters.map((filter, idx)=>{\r\n\t\t\t\t\tlet icon;\r\n\t\t\t\t\tlet deleteThisFilter = deleteFilter.bind(null,filter);\r\n\t\t\t\t\tlet onThisValueAssigned = onValueAssigned.bind(null,filter)\r\n\t\t\t\t\tif(idx+1<filters.length){\r\n\t\t\t\t\t\ticon = <IconButton onClick={deleteThisFilter}><HighlightOffIcon /></IconButton>\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn(<Box m={1} key={filter.key} component=\"div\" display=\"block\">\r\n\t\t\t\t\t\t<FieldFilter key={filter.key} variables={variables} metadata={metadata} onVariableSelected={addFilter} onValueAssigned={onThisValueAssigned}/>\r\n\t\t\t\t\t\t{icon}\r\n\t\t\t\t\t\t</Box>);\r\n\t\t\t\t})}\r\n\t\t\t</React.Fragment>);\r\n}","import React from 'react';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\n\r\nexport default function ResultsTable(props) {\r\n\tconst {data,variables} = props;\r\n\r\n\t  if(!(variables && variables.length)){\r\n\t  \treturn (\"\")\r\n\t  }\r\n\t  const keys = variables;\r\n\t  return (\r\n\t  \t<React.Fragment>\r\n\t  \t<Typography variant=\"h5\" gutterBottom>Example Results:</Typography>\r\n\t  <TableContainer component={Paper}>\r\n      <Table size=\"small\" aria-label=\"a dense table\">\r\n        <TableHead>\r\n          <TableRow>\r\n          {\r\n          \tkeys.map((key,idx) => <TableCell key={idx}>{key}</TableCell>)\r\n          }\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {data.map( (row, idx) => (\r\n            <TableRow key={idx}>\r\n            {\r\n\t          \tkeys.map((k,idx) => (<TableCell key={idx}>{row[k]}</TableCell>))\r\n            }\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n    </React.Fragment>\r\n    );\r\n}","const options = [\n  {\n    \"value\": \".asc\",\n    \"label\": \".asc - View OPeNDAP-style ISO-8859-1 comma-separated text.\"\n  },\n  {\n    \"value\": \".csv\",\n    \"label\": \".csv - Download a ISO-8859-1 comma-separated text table (line 1: names; line 2: units; ISO 8601 times).\"\n  },\n  {\n    \"value\": \".csv0\",\n    \"label\": \".csv0 - Download a ISO-8859-1 .csv file without column names or units. Times are ISO 8601 strings.\"\n  },\n  {\n    \"value\": \".csvp\",\n    \"label\": \".csvp - Download a ISO-8859-1 .csv file with line 1: name (units). Times are ISO 8601 strings.\"\n  },\n  {\n    \"value\": \".das\",\n    \"label\": \".das - View the dataset's metadata via an ISO-8859-1 OPeNDAP Dataset Attribute Structure (DAS).\"\n  },\n  {\n    \"value\": \".dds\",\n    \"label\": \".dds - View the dataset's structure via an ISO-8859-1 OPeNDAP Dataset Descriptor Structure (DDS).\"\n  },\n  {\n    \"value\": \".dods\",\n    \"label\": \".dods - OPeNDAP clients use this to download the data in the DODS binary format.\"\n  },\n  {\n    \"value\": \".esriCsv\",\n    \"label\": \".esriCsv - Download a ISO_8859_1 .csv file for ESRI's ArcGIS 9.x and below (separate date and time columns).\"\n  },\n  {\n    \"value\": \".fgdc\",\n    \"label\": \".fgdc - View the dataset's UTF-8 FGDC .xml metadata.\"\n  },\n  {\n    \"value\": \".geoJson\",\n    \"label\": \".geoJson - Download longitude,latitude,otherColumns data as a UTF-8 GeoJSON .json file.\"\n  },\n  {\n    \"value\": \".graph\",\n    \"label\": \".graph - View a Make A Graph web page.\"\n  },\n  {\n    \"value\": \".help\",\n    \"label\": \".help - View a web page with a description of tabledap.\"\n  },\n  {\n    \"value\": \".html\",\n    \"label\": \".html - View an OPeNDAP-style HTML Data Access Form.\"\n  },\n  {\n    \"value\": \".htmlTable\",\n    \"label\": \".htmlTable - View a UTF-8 .html web page with the data in a table. Times are ISO 8601 strings.\"\n  },\n  {\n    \"value\": \".iso19115\",\n    \"label\": \".iso19115 - View the dataset's ISO 19115-2/19139 UTF-8 .xml metadata.\"\n  },\n  {\n    \"value\": \".itx\",\n    \"label\": \".itx - Download an ISO-8859-1 Igor Text File. Each response column becomes a wave.\"\n  },\n  {\n    \"value\": \".json\",\n    \"label\": \".json - View a table-like UTF-8 JSON file (missing value = 'null'; times are ISO 8601 strings).\"\n  },\n  {\n    \"value\": \".jsonlCSV\",\n    \"label\": \".jsonlCSV - View a UTF-8 JSON Lines CSV file (missing value = 'null'; times are ISO 8601 strings).\"\n  },\n  {\n    \"value\": \".jsonlKVP\",\n    \"label\": \".jsonlKVP - View a UTF-8 JSON Lines file with Key:Value pairs (missing value = 'null'; times are ISO 8601 strings).\"\n  },\n  {\n    \"value\": \".kml\",\n    \"label\": \".kml - View a .kml file, suitable for Google Earth.\"\n  },\n  {\n    \"value\": \".largePdf\",\n    \"label\": \".largePdf - View a large .pdf image file with a graph or map.\"\n  },\n  {\n    \"value\": \".largePng\",\n    \"label\": \".largePng - View a large .png image file with a graph or map.\"\n  },\n  {\n    \"value\": \".mat\",\n    \"label\": \".mat - Download a MATLAB binary file.\"\n  },\n  {\n    \"value\": \".nc\",\n    \"label\": \".nc - Download a flat, table-like, NetCDF-3 binary file with COARDS/CF/ACDD metadata.\"\n  },\n  {\n    \"value\": \".ncCF\",\n    \"label\": \".ncCF - Download a NetCDF-3 CF Discrete Sampling Geometries file (Contiguous Ragged Array).\"\n  },\n  {\n    \"value\": \".ncCFHeader\",\n    \"label\": \".ncCFHeader - View the UTF-8 header (the metadata) for the .ncCF file.\"\n  },\n  {\n    \"value\": \".ncCFMA\",\n    \"label\": \".ncCFMA - Download a NetCDF-3 CF Discrete Sampling Geometries file (Multidimensional Array).\"\n  },\n  {\n    \"value\": \".ncCFMAHeader\",\n    \"label\": \".ncCFMAHeader - View the UTF-8 header (the metadata) for the .ncCFMA file.\"\n  },\n  {\n    \"value\": \".ncHeader\",\n    \"label\": \".ncHeader - View the UTF-8 header (the metadata) for the NetCDF-3 .nc file.\"\n  },\n  {\n    \"value\": \".nccsv\",\n    \"label\": \".nccsv - Download a NetCDF-3-like 7-bit ASCII NCCSV .csv file with COARDS/CF/ACDD metadata.\"\n  },\n  {\n    \"value\": \".nccsvMetadata\",\n    \"label\": \".nccsvMetadata - View the dataset's metadata as the top half of a 7-bit ASCII NCCSV .csv file.\"\n  },\n  {\n    \"value\": \".ncoJson\",\n    \"label\": \".ncoJson - Download a UTF-8 NCO lvl=2 JSON file with COARDS/CF/ACDD metadata.\"\n  },\n  {\n    \"value\": \".odvTxt\",\n    \"label\": \".odvTxt - Download longitude,latitude,time,otherColumns as an ISO-8859-1 ODV Generic Spreadsheet File (.txt).\"\n  },\n  {\n    \"value\": \".pdf\",\n    \"label\": \".pdf - View a standard, medium-sized .pdf image file with a graph or map.\"\n  },\n  {\n    \"value\": \".png\",\n    \"label\": \".png - View a standard, medium-sized .png image file with a graph or map.\"\n  },\n  {\n    \"value\": \".smallPdf\",\n    \"label\": \".smallPdf - View a small .pdf image file with a graph or map.\"\n  },\n  {\n    \"value\": \".smallPng\",\n    \"label\": \".smallPng - View a small .png image file with a graph or map.\"\n  },\n  {\n    \"value\": \".subset\",\n    \"label\": \".subset - View an HTML form which uses faceted search to simplify picking subsets of the data.\"\n  },\n  {\n    \"value\": \".transparentPng\",\n    \"label\": \".transparentPng - View a .png image file (just the data, without axes, landmask, or legend).\"\n  },\n  {\n    \"value\": \".tsv\",\n    \"label\": \".tsv - Download a ISO-8859-1 tab-separated text table (line 1: names; line 2: units; ISO 8601 times).\"\n  },\n  {\n    \"value\": \".tsv0\",\n    \"label\": \".tsv0 - Download a ISO-8859-1 .tsv file without column names or units. Times are ISO 8601 strings.\"\n  },\n  {\n    \"value\": \".tsvp\",\n    \"label\": \".tsvp - Download a ISO-8859-1 .tsv file with line 1: name (units). Times are ISO 8601 strings.\"\n  },\n  {\n    \"value\": \".wav\",\n    \"label\": \".wav - Download a .wav audio file. All columns must be numeric and of the same type.\"\n  },\n  {\n    \"value\": \".xhtml\",\n    \"label\": \".xhtml - View a UTF-8 XHTML (XML) file with the data in a table. Times are ISO 8601 strings.\"\n  }\n];\n\nexport default options;","import React from 'react';\r\nimport MultiSelectSort from './MultiSelectSort';\r\nimport FieldFilters from './FieldFilters';\r\nimport ResultsTable from './ResultsTable';\r\nimport {debounce} from 'lodash';\r\nimport TabledapFormats from './TabledapFormats';\r\nimport { Select, MenuItem, Box, Typography } from '@material-ui/core';\r\n\r\nclass QueryConstructorForm extends React.Component{\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tvariables: [],\r\n\t\t\tfilters: []\r\n\t\t}\r\n\t\tthis.setSelected = this.setSelected.bind(this);\r\n\t\tthis.onFiltersChanged = this.onFiltersChanged.bind(this);\r\n\t}\r\n\r\n\r\n\tsetSelected(selected){\r\n\t\tthis.setState({variables: selected});\r\n\t\tselected.forEach(variable=>{\r\n\t\t\tif(this.props.dataset._meta.subsetVariables.indexOf(variable)>=0){\r\n\t\t\t\tthis.props.dataset.prepareSubset(variable);\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.props.onChange(selected, this.state.filters);\r\n\t}\r\n\r\n\tonFiltersChanged(filters){\r\n\t\tthis.setState({filters: filters});\r\n\t\tthis.props.onChange && this.props.onChange(this.state.variables, filters);\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps){\r\n\t\tif(prevProps.dataset !== this.props.dataset){\r\n\t\t\tthis.setState({variables: []});}\r\n\r\n\t}\r\n\r\n\trender(){\r\n\t\tconst {dataset, metadata} = this.props;\r\n\t\tconst {variables} = this.state;\r\n\t\tif(metadata){\r\n\t\t\tconst map = (field)=>{return {value: field, label: field, selected: variables.indexOf(field)>=0}};\r\n\r\n\t\t\tconst options = variables.map(map);\r\n\t\t\tmetadata._fieldnames.filter(field=>variables.indexOf(field)<0).map(map).forEach(option=>options.push(option));\r\n\t\t\t\r\n\t\t\treturn (<React.Fragment>\r\n\t\t\t\t<MultiSelectSort \r\n\t\t\t\tdataset={dataset} \r\n\t\t\t\tselected={options.filter(o=>variables.indexOf(o.value)>=0)} \r\n\t\t\t\toptions={options} \r\n\t\t\t\tonChange={selected => this.setSelected(selected?selected.map(o=>o.value):[])} \r\n\t\t\t\tplaceholder={<p>Select some fields...</p>}/>\r\n\r\n\t\t\t\t{variables.length > 0 &&\r\n\t\t\t\t\t<FieldFilters onFiltersChanged={this.onFiltersChanged} variables={variables} metadata={metadata}/>\r\n\t\t\t\t}\r\n\t\t\t\t</React.Fragment>)\r\n  \t\t}\r\nreturn (<h1>sorry, no metadata</h1>)\r\n\t}\r\n}\r\nfunction QueryLink(props){\r\n\tconst {dataset,variables,filters} = props;\r\n\tconst [format, setFormat] = React.useState(\"__choose__\");\r\n\t\tconst onChange = (e,value) =>{\r\n            setFormat(e.target.value);\r\n        };\r\n\t\tconst options = TabledapFormats.map((format) =>\r\n  \t\t\t<MenuItem key={format.value} value={format.value}>{format.label}</MenuItem>\r\n  \t\t);\r\n  \t\tif(!(variables && variables.length)){\r\n  \t\t\treturn \"\";\r\n  \t\t}\r\n\t\tconst parts = [variables.join(\",\")];\r\n\t\tconst displayparts = [variables.join(\",\")];\r\n\t\tif(filters && filters.length){\r\n\t\t\tparts.push(filters.map(filter=>encodeURIComponent(filter.uri_component)).join(\"&\"))\r\n\t\t\tdisplayparts.push(filters.map(filter=>filter.uri_component).join(\"&\"))\r\n\t\t}\r\n\t\tconst base_url = dataset.getDataUrl(format===\"__choose__\"?\".htmlTable\":format);\r\n\t\tconst uri_component = base_url+parts.join(\"&\");\r\n\t\tconst uri_display = base_url+displayparts.join(\"&\");\r\n\treturn (\r\n\t<React.Fragment>\r\n\t  \t<Typography variant=\"h5\" gutterBottom>Download Link:</Typography>\r\n\t\t<Box m={1} key=\"Download Format\" component=\"div\" display=\"block\">\r\n\t\t<Select value={format} onChange={onChange}>\r\n\t\t\t<MenuItem key=\"__choose__\" value=\"__choose__\" >Choose Download File Format...</MenuItem>\r\n\t\t{options}\r\n\t\t</Select>\r\n\t\t</Box>\r\n\t\t<a key=\"downloadLink\" href={uri_component}>{uri_display}</a>\r\n\t</React.Fragment>\r\n\t);\r\n}\r\nclass DataAccessForm extends React.Component {\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tdataset: false,\r\n\t\t\tmetadata: false,\r\n\t\t\tdata: [],\r\n\t\t\tvariables: [],\r\n\t\t\tfilters: [],\r\n\t\t\tqueryno: 0\r\n\t\t}\r\n\t\tthis.onChange = debounce(this.onChange.bind(this),500);\r\n\t\tthis.onDataFetched = this.onDataFetched.bind(this);\r\n\t\tthis.noDataFetched = this.noDataFetched.bind(this);\r\n\t}\r\n\r\n\tonChange = function(variables,filters){\r\n\t\tconst {dataset,queryno} = this.state;\r\n\t\tlet parts = [variables.join(\",\")]\r\n\t\tif(filters && filters.length){\r\n\t\t\tparts.push(filters.map(filter=>encodeURIComponent(filter.uri_component)).join(\"&\"))\r\n\t\t}\r\n\t\tparts.push(encodeURIComponent('orderByLimit(\"5\")'))\r\n\t\tlet uri_component = parts.join(\"&\");\r\n\t\tlet newqueryno = queryno + 1;\r\n\t\tthis.setState({variables: variables, filters: filters, queryno: newqueryno,  data: []});\r\n\t\tdataset.fetchData(uri_component).then(this.onDataFetched.bind(this,newqueryno)).catch(this.noDataFetched.bind(this,newqueryno));\r\n\t}\r\n\r\n\tonDataFetched = function(queryno,data){\r\n\t\tif(this.state.queryno === queryno){\r\n\t\t\tthis.setState({data: data});\r\n\t\t}\r\n\t}\r\n\tnoDataFetched = function(queryno,err){\r\n\t\tif(this.state.queryno === queryno){\r\n\t\t\tthis.setState({data: []});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps){\r\n\t\tif(prevProps.dataset_id !== this.props.dataset_id){\r\n\t\t\tthis.setState({\r\n\t\t\tdataset: false,\r\n\t\t\tmetadata: false,\r\n\t\t\tdata: [],\r\n\t\t\tvariables: [] });\r\n\t\t\tif(this.props.dataset_id === \"0\"){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst dataset = this.props.erddap.dataset(this.props.dataset_id);\r\n\t\t\tdataset.fetchMetadata().then(function(metadata){\r\n\t\t\t\tthis.setState({dataset: dataset, metadata: metadata, data: []});\r\n\t\t\t}.bind(this))\r\n\t\t}\r\n\t}\r\n\trender(){\r\n\t\tconst {dataset_id} = this.props;\r\n\t\tconst {dataset,metadata,data,variables,filters} = this.state;\r\n\t\tif(dataset_id === \"0\" || !dataset_id)  {\r\n\t\t\treturn(<div></div>)\r\n\t\t}\r\n\t\tif(!dataset){\r\n\t\t\treturn(<div>loading {dataset_id}</div>)\r\n\t\t}\r\n\t\treturn(\r\n\t\t<React.Fragment>\r\n\t\t\t<QueryConstructorForm onChange={this.onChange} dataset={dataset} metadata={metadata}/>\r\n\t\t\t<ResultsTable data={data} variables={variables}/>\r\n\t\t\t<QueryLink variables={variables} filters={filters} dataset={dataset}/>\r\n\t\t</React.Fragment>\r\n\t\t)\r\n\r\n\t}\r\n}\r\n\r\nexport default DataAccessForm","import React from 'react';\r\nimport ErddapClient from '../ErddapClient'\r\nimport DataAccessForm from './DataAccessForm'\r\nimport { Select, MenuItem } from '@material-ui/core';\r\n\r\n\r\nclass Erddap extends React.Component {\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tserver: props.server || 'https://erddap.marine.ie/erddap/',\r\n\t\t\tdatasets: [],\r\n\t\t\tdataset: 0\r\n\t\t}\r\n\t\tthis.onDatasetChanged = this.onDatasetChanged.bind(this);\r\n\t}\r\n     \r\n    onDatasetChanged(event){\r\n\t    this.setState({dataset: event.target.value})\r\n    }\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet erddap = new ErddapClient(this.state.server);\r\n\t\tthis.setState({erddap: erddap});\r\n\t\terddap.listDatasets().then((datasets) =>{\r\n\t\t\tthis.setState({datasets: datasets})\r\n\t\t})\r\n    }\r\n\r\n\trender() {\r\n\t\tconst {datasets,erddap,dataset} = this.state;\r\n\t\tconst options = datasets.map((dataset_id) =>\r\n  \t\t\t<MenuItem key={dataset_id} value={dataset_id}>{dataset_id}</MenuItem>\r\n  \t\t);\r\n\t\treturn (\r\n\t\t<React.Fragment>\r\n\t\t<Select value={dataset} onChange={this.onDatasetChanged} >\r\n\t\t    <MenuItem value=\"0\" key=\"choose...\" selected>Choose Dataset...</MenuItem>\r\n\t\t\t{options}\r\n\t\t</Select>\r\n\t\t<DataAccessForm erddap={erddap} dataset_id={dataset}/>\r\n\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Erddap","import React, {useState, useEffect} from 'react';\nimport { Select, MenuItem, Box } from '@material-ui/core';\nimport ErddapClient from '../ErddapClient'\nimport Erddap from './Erddap';\nconst erddapClient = new ErddapClient();\nexport default function Erddaps(props){\n    const [awesomeErddaps, setAwesomErddaps] = useState([]);\n    const [message, setMessage] = useState(\"loading...\");\n    const [erddapUrl, setErddapUrl] = useState(\"choose\");\n    const [fetchedAwesomErddaps, setFetchedAwesomeErddaps] = useState(false);\n    const onErddapChanged = function(event){\n        setErddapUrl(event.target.value);\n    }\n    useEffect(()=>{\n        if(!fetchedAwesomErddaps){\n            setFetchedAwesomeErddaps(true);\n            async function fetchData() {\n                await erddapClient.fetchAwesomeErddaps().then(data=>{\n                    setAwesomErddaps(data.filter(x=>x.public));\n                });\n              }\n            fetchData();        \n        }\n    });\n    const options = awesomeErddaps.map((erddap) =>\n            <MenuItem key={erddap.short_name} value={erddap.url}>{erddap.name}</MenuItem>\n        );\n    const erddap = erddapUrl === \"choose\"? \"\": (<Erddap key={erddapUrl} server={erddapUrl} />);\n        return (\n        <React.Fragment>\n            <Box display=\"block\">\n            <Select value={erddapUrl} onChange={onErddapChanged} >\n                <MenuItem value=\"choose\" key=\"choose...\" selected>Choose Erddap...</MenuItem>\n                {options}\n            </Select>\n            </Box>\n\n             {erddap}\n        </React.Fragment>\n        );\n\n}\n","import React from 'react';\nimport 'normalize.css';\nimport './App.css';\nimport Erddaps from './components/Erddaps'\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport DateFnsUtils from '@date-io/date-fns';\n// https://irishmarineinstitute.github.io/awesome-erddap/erddaps.js\nfunction App() {\n  return (\n  \t<MuiPickersUtilsProvider utils={DateFnsUtils}>\n\t    <div className=\"App\">\n\t      <header className=\"App-header\">\n\t        <Erddaps />\n\t      </header>\n\t    </div>\n    </MuiPickersUtilsProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n"],"sourceRoot":""}